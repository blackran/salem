{"ast":null,"code":"var _jsxFileName = \"/home/files/hybrid_pojects/SALEM/frontend/src/Components/Clients/ChambresDetails/layouts/AnnexChambresDetails/AnnexChambresDetails.js\";\nimport './statics/styles/Chambres.scss';\nimport { PanoramaFishEyeOutlined } from '@material-ui/icons';\nimport axios from 'axios';\nimport React, { lazy, Component, Suspense } from 'react';\nimport { connect } from 'react-redux';\nimport { urlHeader } from '../../../../../Actions/config';\nconst ChambreCardPattern = lazy(() => import('./layouts/ChambreCardPattern/ChambreCardPattern'));\n\nclass AnnexChambresDetails extends Component {\n  constructor(...args) {\n    super(...args);\n    this._isMounted = false;\n  }\n\n  // otherGetChambrePrix(){\n  //   const stock = lazy(new Promise((resolve, reject) => {\n  //       return resolve(this.getChambrePrix());\n  //   }))\n  //   return stock;\n  // }\n  getChambrePrix() {\n    console.log(this.props.reserver.dataReserver);\n    const reservation = this.props.reserver.dataReserver.filter(e => {\n      const d1 = new Date(e.dateDebutReservation);\n      const d2 = new Date(e.dateFinReservation);\n      const d3 = this.props.reserver.date1;\n      const d4 = this.props.reserver.date2;\n      const d5 = d1 - d3; //si d5>0 d3 < d1\n\n      const d6 = d2 - d4; //si d6>0 d4 < d2\n\n      const d7 = d3 - d2; //si d7>0 d2 < d3\n\n      const d8 = d4 - d1; //si d8>0 d1 < d4\n      // d3 < d1 && d2 < d4                 d5>0 && d6<0\n      // d3 < d1 && d4 < d2  && d1 < d4     d5>0 && d6>0 && d8>0\n      // d1 < d3 && d4 < d2                 d5<0 && d6>0\n      // d1 < d3 && d2 < d4  && d3 < d2     d5<0 && d6<0 && d7<0\n\n      var stock = false;\n\n      if (d5 > 0 && d6 < 0 || d5 > 0 && d6 > 0 && d8 > 0 || d5 < 0 && d6 > 0 || d5 < 0 && d6 < 0 && d7 < 0) {\n        stock = true;\n      }\n\n      return stock;\n    });\n    const newStock = reservation.map(h => {\n      return h.numReservation;\n    });\n    const concerner = this.props.concerner.dataConcerner.filter(e => {\n      return newStock.includes(e.numReservation);\n    });\n    const newConcerner = concerner.map(e => {\n      return e.nomChambre;\n    });\n    const chambres = this.props.chambres.newDataChambres.filter(e => {\n      return parseInt(e.prixChambre) <= parseInt(this.props.chambres.slide) && !newConcerner.includes(e.nomChambre);\n    });\n    return chambres;\n  }\n\n  componentDidMount() {\n    this._isMounted = true;\n\n    if (this.props.chambres.newDataChambres.length === 0) {\n      axios.get(urlHeader + \"Chambres/get\").then(res => res.data).then(state => {\n        state.filter(e => {\n          return e.numType === this.props.types;\n        });\n        return this.props.newDataChambres(state.filter(e => e.numType === parseInt(this.props.types)));\n      }).catch(err => console.log(\"error parsing:\\n\", err));\n    }\n  } // devient active quand cette component est demonter\n\n\n  componentWillUnmount() {\n    this._isMounted = false;\n    this.props.newDataChambres([]);\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"AllListChambre\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }, React.createElement(Suspense, {\n      fallback: React.createElement(\"div\", {\n        style: {\n          position: 'relative',\n          top: 100\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      }, \" \", React.createElement(PanoramaFishEyeOutlined, {\n        className: \"loading\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      })),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }, this.getChambrePrix().length !== 0 ? this.getChambrePrix().map((e, k) => {\n      return React.createElement(\"div\", {\n        key: e.nomChambre,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }, React.createElement(ChambreCardPattern, {\n        data: e,\n        delay: k,\n        key: e.nomChambre,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }));\n    }) : React.createElement(\"h1\", {\n      style: {\n        position: 'relative',\n        top: 100\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, \"Ces types de chambres n'existent pas chez nous\")));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    chambres: state.chambres,\n    reserver: state.reserver,\n    concerner: state.concerner,\n    clients: state.clients\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    updateOne: data => {\n      dispatch({\n        type: \"UPDATE_ONE\",\n        data\n      });\n    },\n    updateEroor: data => {\n      dispatch({\n        type: \"UPDATE_EROOR\",\n        data: data\n      });\n    },\n    fetchchambres: data => {\n      dispatch({\n        type: \"FETCH_CHAMBRES\",\n        data: data\n      });\n    },\n    updateSlide: data => {\n      dispatch({\n        type: \"ON_CHANGE_SLIDER\",\n        data: data\n      });\n    },\n    updateDate1: data => {\n      dispatch({\n        type: \"UPDATE_DATE_1\",\n        data: data\n      });\n    },\n    updateDate2: data => {\n      dispatch({\n        type: \"UPDATE_DATE_2\",\n        data: data\n      });\n    },\n    fetchClients: data => {\n      dispatch({\n        type: \"FETCH_CLIENTS\",\n        data: data\n      });\n    },\n    newDataChambres: data => {\n      dispatch({\n        type: \"NEW_DATA_CHAMBRES\",\n        data: data\n      });\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AnnexChambresDetails);","map":{"version":3,"sources":["/home/files/hybrid_pojects/SALEM/frontend/src/Components/Clients/ChambresDetails/layouts/AnnexChambresDetails/AnnexChambresDetails.js"],"names":["PanoramaFishEyeOutlined","axios","React","lazy","Component","Suspense","connect","urlHeader","ChambreCardPattern","AnnexChambresDetails","_isMounted","getChambrePrix","console","log","props","reserver","dataReserver","reservation","filter","e","d1","Date","dateDebutReservation","d2","dateFinReservation","d3","date1","d4","date2","d5","d6","d7","d8","stock","newStock","map","h","numReservation","concerner","dataConcerner","includes","newConcerner","nomChambre","chambres","newDataChambres","parseInt","prixChambre","slide","componentDidMount","length","get","then","res","data","state","numType","types","catch","err","componentWillUnmount","render","position","top","k","mapStateToProps","clients","mapDispatchToProps","dispatch","updateOne","type","updateEroor","fetchchambres","updateSlide","updateDate1","updateDate2","fetchClients"],"mappings":"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","sourcesContent":["import './statics/styles/Chambres.scss';\n\nimport {PanoramaFishEyeOutlined} from '@material-ui/icons';\nimport axios from 'axios';\nimport React, {lazy, Component, Suspense} from 'react';\nimport {connect} from 'react-redux';\nimport {urlHeader} from '../../../../../Actions/config';\n\nconst ChambreCardPattern = lazy(() => import ('./layouts/ChambreCardPattern/ChambreCardPattern'));\n\nclass AnnexChambresDetails extends Component {\n  _isMounted = false;\n\n  // otherGetChambrePrix(){\n  //   const stock = lazy(new Promise((resolve, reject) => {\n  //       return resolve(this.getChambrePrix());\n  //   }))\n  //   return stock;\n  // }\n  getChambrePrix() {\n    console.log(this.props.reserver.dataReserver)\n    const reservation = this.props.reserver.dataReserver.filter((e) => {\n      const d1 = new Date(e.dateDebutReservation);\n      const d2 = new Date(e.dateFinReservation);\n      const d3 = this.props.reserver.date1;\n      const d4 = this.props.reserver.date2;\n      const d5 = d1 - d3 //si d5>0 d3 < d1\n      const d6 = d2 - d4 //si d6>0 d4 < d2\n      const d7 = d3 - d2 //si d7>0 d2 < d3\n      const d8 = d4 - d1 //si d8>0 d1 < d4\n\n      // d3 < d1 && d2 < d4                 d5>0 && d6<0\n      // d3 < d1 && d4 < d2  && d1 < d4     d5>0 && d6>0 && d8>0\n      // d1 < d3 && d4 < d2                 d5<0 && d6>0\n      // d1 < d3 && d2 < d4  && d3 < d2     d5<0 && d6<0 && d7<0\n\n      var stock = false;\n      if ((d5 > 0 && d6 < 0) || (d5 > 0 && d6 > 0 && d8 > 0) || (d5 < 0 && d6 > 0) || (d5 < 0 && d6 < 0 && d7 < 0)) {\n        stock = true;\n      }\n      return (stock);\n    })\n\n    const newStock = reservation.map((h) => {\n      return h.numReservation;\n    })\n\n    const concerner = this.props.concerner.dataConcerner.filter((e) => {\n      return newStock.includes(e.numReservation);\n    })\n\n    const newConcerner = concerner.map((e) => {\n      return e.nomChambre;\n    })\n\n\n    const chambres = this.props.chambres.newDataChambres.filter((e) => {\n      return ((parseInt(e.prixChambre) <= parseInt(this.props.chambres.slide)) && (!newConcerner.includes(e.nomChambre)))\n    })\n    return chambres\n  }\n\n  componentDidMount() {\n    this._isMounted = true;\n    if (this.props.chambres.newDataChambres.length === 0) {\n      axios.get(urlHeader+\"Chambres/get\").then(res => res.data).then(state => {\n        state.filter(e => {\n          return e.numType === this.props.types\n        })\n        return this.props.newDataChambres(state.filter(e => e.numType === parseInt(this.props.types)))\n      }).catch(err => console.log(\"error parsing:\\n\", err));\n    }\n  }\n\n  // devient active quand cette component est demonter\n  componentWillUnmount() {\n    this._isMounted = false;\n    this.props.newDataChambres([])\n  }\n\n  render() {\n    return (<div className=\"AllListChambre\">\n      <Suspense fallback={<div style = {{position: 'relative', top: 100}} > <PanoramaFishEyeOutlined className=\"loading\"/></div>}>\n      {/* {console.log(this.getChambrePrix())} */}\n        {\n          this.getChambrePrix().length !== 0\n            ? (this.getChambrePrix().map((e, k) => {\n              return <div key={e.nomChambre}>\n                <ChambreCardPattern data={e} delay={k} key={e.nomChambre}/>\n              </div>\n            }))\n            : (<h1 style={{\n                position: 'relative',\n                top: 100\n              }}>Ces types de chambres n'existent pas chez nous</h1>)\n        }\n        </Suspense>\n        </div>);\n  }\n}\nconst mapStateToProps = state => {\n  return {chambres: state.chambres, reserver: state.reserver, concerner: state.concerner, clients: state.clients}\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    updateOne: (data) => {\n      dispatch({type: \"UPDATE_ONE\", data});\n    },\n    updateEroor: (data) => {\n      dispatch({type: \"UPDATE_EROOR\", data: data});\n    },\n    fetchchambres: (data) => {\n      dispatch({type: \"FETCH_CHAMBRES\", data: data});\n    },\n    updateSlide: (data) => {\n      dispatch({type: \"ON_CHANGE_SLIDER\", data: data});\n    },\n    updateDate1: (data) => {\n      dispatch({type: \"UPDATE_DATE_1\", data: data});\n    },\n    updateDate2: (data) => {\n      dispatch({type: \"UPDATE_DATE_2\", data: data});\n    },\n    fetchClients: (data) => {\n      dispatch({type: \"FETCH_CLIENTS\", data: data});\n    },\n    newDataChambres: (data) => {\n      dispatch({type: \"NEW_DATA_CHAMBRES\", data: data});\n    }\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AnnexChambresDetails);\n"]},"metadata":{},"sourceType":"module"}