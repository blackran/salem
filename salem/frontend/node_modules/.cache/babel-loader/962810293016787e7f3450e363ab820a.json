{"ast":null,"code":"import axios from 'axios';\nimport { ADD_CHAMBRES, DELETE_CHAMBRES, UPDATE_CHAMBRES, FETCH_CHAMBRES, UPDATE_ONE, ON_CHANGE_CHAMBRES, ON_CHANGE_SLIDER, NEW_DATA_CHAMBRES } from '../Actions/typesChambres';\nimport { urlHeader } from '../Actions/config';\nconst initState = {\n  dataChambres: [// {\n    //   \"nomChambre\": \"Coquelicot\",\n    //   \"telChambre\": \"0349354341\",\n    //   \"etageChambre\": \"1\",\n    //   \"chauffeauChambre\": \"GAZ\",\n    //   \"prixChambre\": 20000,\n    //   \"numCategorie\": 1,\n    //   \"numType\": 1,\n    //   \"imageChambre\": \"\"\n    // },\n    // {\n    //   \"nomChambre\": \"Jonquille\",\n    //   \"telChambre\": \"0349354341\",\n    //   \"etageChambre\": \"1\",\n    //   \"chauffeauChambre\": \"GAZ\",\n    //   \"prixChambre\": 20000,\n    //   \"numCategorie\": 1,\n    //   \"numType\": 1,\n    //   \"imageChambre\": \"\"\n    // }\n  ],\n  mocksChambres: '',\n  one: true,\n  submitReusit: true,\n  changes: {\n    nomChambre: \"\",\n    telChambre: \"\",\n    etageChambre: \"\",\n    chauffeauChambre: \"\",\n    prixChambre: \"\",\n    numCategorie: \"\",\n    numType: \"\"\n  },\n  slide: 0,\n  dateNow: '',\n  newDataChambres: []\n};\n\nconst ChambresReducers = (state = initState, action) => {\n  switch (action.type) {\n    case ADD_CHAMBRES:\n      axios.post(urlHeader + \"Chambres/post\", action.data, {\n        headers: {\n          'Content-Type': 'application/x-www-form-urlencoded',\n          'Access-Control-Allow-Methods': 'POST,GET,HEAD,OPTIONS,PUT,DELETE'\n        }\n      }).then(h => console.log(h)).catch(err => console.log(\"error parsing:\\n\", err));\n      state.dataChambres = [...state.dataChambres, ...action.data];\n      return Object.assign({}, state, state.dataChambres);\n\n    case DELETE_CHAMBRES:\n      const st = state.dataChambres.filter(e => {\n        return e.nomChambre !== action.id;\n      });\n      state.dataChambres = [...st];\n      axios.delete(urlHeader + \"Chambres/delete/\" + action.id, {\n        headers: {\n          'Content-Type': 'application/x-www-form-urlencoded',\n          'Access-Control-Allow-Methods': 'POST,GET,HEAD,OPTIONS,PUT,DELETE'\n        }\n      }).then(e => console.log(e)).catch(err => console.log(\"error parsing:\\n\", err));\n      return Object.assign({}, state, state.dataChambres);\n\n    case UPDATE_CHAMBRES:\n      const std1 = state.dataChambres.filter(e => {\n        return e.nomChambre !== action.data.nomChambre;\n      });\n      const sto1 = action.data;\n      state.dataChambres = [...std1, sto1];\n      console.log(sto1);\n      axios.post(urlHeader + \"Chambres/put/\" + action.data.nomChambre, sto1, {\n        headers: {\n          'Content-Type': 'application/json;charset=UTF-8',\n          'Access-Control-Allow-Methods': 'POST,GET,HEAD,OPTIONS,PUT,DELETE'\n        }\n      }).then(e => console.log(e)).catch(err => console.log(\"error parsing:\\n\", err));\n      return Object.assign({}, state, state.dataChambres);\n\n    case FETCH_CHAMBRES:\n      state.dataChambres = [];\n      state.newDataChambres = [];\n      state.dataChambres = [...action.data];\n      console.log(action.data);\n      state.dataChambres.map(e => {\n        if (e.prixChambre >= state.slide) {\n          state.slide = e.prixChambre;\n        }\n\n        return null;\n      });\n      const date = new Date();\n      const years = date.getFullYear();\n      const mounth = (parseInt(date.getMonth()) < 10 ? '0' : '') + date.getMonth();\n      const days = (parseInt(date.getDate()) < 10 ? '0' : '') + date.getDate();\n      state.dateNow = years + \"-\" + mounth + \"-\" + days;\n      return Object.assign({}, state, state.dataChambres);\n\n    case UPDATE_ONE:\n      state.one = action.data;\n      return Object.assign({}, state, state.one);\n\n    case ON_CHANGE_CHAMBRES:\n      state.changes[action.data.name] = action.data.value;\n      return Object.assign({}, state, state.changes);\n\n    case ON_CHANGE_SLIDER:\n      state.slide = action.data;\n      return Object.assign({}, state, state.slide);\n\n    case NEW_DATA_CHAMBRES:\n      state.newDataChambres = [];\n      state.newDataChambres = action.data;\n      return Object.assign({}, state, state.newdataChambres);\n\n    default:\n      return state;\n  }\n};\n\nexport default ChambresReducers;","map":{"version":3,"sources":["/home/files/hybrid_pojects/SALEM/frontend/src/reducers/ChambresReducers.js"],"names":["axios","ADD_CHAMBRES","DELETE_CHAMBRES","UPDATE_CHAMBRES","FETCH_CHAMBRES","UPDATE_ONE","ON_CHANGE_CHAMBRES","ON_CHANGE_SLIDER","NEW_DATA_CHAMBRES","urlHeader","initState","dataChambres","mocksChambres","one","submitReusit","changes","nomChambre","telChambre","etageChambre","chauffeauChambre","prixChambre","numCategorie","numType","slide","dateNow","newDataChambres","ChambresReducers","state","action","type","post","data","headers","then","h","console","log","catch","err","Object","assign","st","filter","e","id","delete","std1","sto1","map","date","Date","years","getFullYear","mounth","parseInt","getMonth","days","getDate","name","value","newdataChambres"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAAQC,YAAR,EAAsBC,eAAtB,EAAuCC,eAAvC,EAAwDC,cAAxD,EAAwEC,UAAxE,EAAoFC,kBAApF,EAAwGC,gBAAxG,EAA0HC,iBAA1H,QAAkJ,0BAAlJ;AACA,SAAQC,SAAR,QAAwB,mBAAxB;AAEA,MAAMC,SAAS,GAAG;AACjBC,EAAAA,YAAY,EAAE,CACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AApBa,GADG;AAuBjBC,EAAAA,aAAa,EAAE,EAvBE;AAwBjBC,EAAAA,GAAG,EAAE,IAxBY;AAyBjBC,EAAAA,YAAY,EAAE,IAzBG;AA0BjBC,EAAAA,OAAO,EAAG;AACTC,IAAAA,UAAU,EAAE,EADH;AAETC,IAAAA,UAAU,EAAE,EAFH;AAGTC,IAAAA,YAAY,EAAE,EAHL;AAITC,IAAAA,gBAAgB,EAAE,EAJT;AAKTC,IAAAA,WAAW,EAAE,EALJ;AAMTC,IAAAA,YAAY,EAAE,EANL;AAOTC,IAAAA,OAAO,EAAE;AAPA,GA1BO;AAmCjBC,EAAAA,KAAK,EAAE,CAnCU;AAoCjBC,EAAAA,OAAO,EAAE,EApCQ;AAqCjBC,EAAAA,eAAe,EAAE;AArCA,CAAlB;;AAwCA,MAAMC,gBAAgB,GAAG,CAACC,KAAK,GAAGjB,SAAT,EAAoBkB,MAApB,KAA+B;AACvD,UAAQA,MAAM,CAACC,IAAf;AACC,SAAK5B,YAAL;AAECD,MAAAA,KAAK,CAAC8B,IAAN,CAAWrB,SAAS,GAAC,eAArB,EAAsCmB,MAAM,CAACG,IAA7C,EAAkD;AAChDC,QAAAA,OAAO,EAAE;AACT,0BAAgB,mCADP;AAET,0CAAgC;AAFvB;AADuC,OAAlD,EAKIC,IALJ,CAKSC,CAAC,IAAIC,OAAO,CAACC,GAAR,CAAYF,CAAZ,CALd,EAK8BG,KAL9B,CAKoCC,GAAG,IAAIH,OAAO,CAACC,GAAR,CAAY,kBAAZ,EAAgCE,GAAhC,CAL3C;AAMAX,MAAAA,KAAK,CAAChB,YAAN,GAAqB,CACpB,GAAGgB,KAAK,CAAChB,YADW,EACG,GAAGiB,MAAM,CAACG,IADb,CAArB;AAGA,aAAOQ,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBb,KAAlB,EAAyBA,KAAK,CAAChB,YAA/B,CAAP;;AAED,SAAKT,eAAL;AACC,YAAMuC,EAAE,GAAGd,KAAK,CAAChB,YAAN,CAAmB+B,MAAnB,CAA0BC,CAAC,IAAI;AACzC,eAAOA,CAAC,CAAC3B,UAAF,KAAiBY,MAAM,CAACgB,EAA/B;AACA,OAFU,CAAX;AAGAjB,MAAAA,KAAK,CAAChB,YAAN,GAAqB,CAAC,GAAG8B,EAAJ,CAArB;AACAzC,MAAAA,KAAK,CAAC6C,MAAN,CAAapC,SAAS,GAAC,kBAAV,GAA+BmB,MAAM,CAACgB,EAAnD,EAAsD;AACpDZ,QAAAA,OAAO,EAAE;AACT,0BAAgB,mCADP;AAET,0CAAgC;AAFvB;AAD2C,OAAtD,EAKIC,IALJ,CAKUU,CAAD,IAAOR,OAAO,CAACC,GAAR,CAAYO,CAAZ,CALhB,EAKgCN,KALhC,CAKsCC,GAAG,IAAIH,OAAO,CAACC,GAAR,CAAY,kBAAZ,EAAgCE,GAAhC,CAL7C;AAMA,aAAOC,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBb,KAAlB,EAAyBA,KAAK,CAAChB,YAA/B,CAAP;;AAED,SAAKR,eAAL;AACC,YAAM2C,IAAI,GAAGnB,KAAK,CAAChB,YAAN,CAAmB+B,MAAnB,CAA0BC,CAAC,IAAI;AAC3C,eAAOA,CAAC,CAAC3B,UAAF,KAAiBY,MAAM,CAACG,IAAP,CAAYf,UAApC;AACA,OAFY,CAAb;AAGA,YAAM+B,IAAI,GAAGnB,MAAM,CAACG,IAApB;AACAJ,MAAAA,KAAK,CAAChB,YAAN,GAAqB,CACpB,GAAGmC,IADiB,EAEpBC,IAFoB,CAArB;AAIAZ,MAAAA,OAAO,CAACC,GAAR,CAAYW,IAAZ;AACA/C,MAAAA,KAAK,CAAC8B,IAAN,CAAWrB,SAAS,GAAC,eAAV,GAA4BmB,MAAM,CAACG,IAAP,CAAYf,UAAnD,EAA+D+B,IAA/D,EAAoE;AAClEf,QAAAA,OAAO,EAAE;AACT,0BAAgB,gCADP;AAET,0CAAgC;AAFvB;AADyD,OAApE,EAKIC,IALJ,CAKUU,CAAD,IAAOR,OAAO,CAACC,GAAR,CAAYO,CAAZ,CALhB,EAKgCN,KALhC,CAKsCC,GAAG,IAAIH,OAAO,CAACC,GAAR,CAAY,kBAAZ,EAAgCE,GAAhC,CAL7C;AAOA,aAAOC,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBb,KAAlB,EAAyBA,KAAK,CAAChB,YAA/B,CAAP;;AAED,SAAKP,cAAL;AACCuB,MAAAA,KAAK,CAAChB,YAAN,GAAqB,EAArB;AACAgB,MAAAA,KAAK,CAACF,eAAN,GAAwB,EAAxB;AACCE,MAAAA,KAAK,CAAChB,YAAN,GAAqB,CAClB,GAAGiB,MAAM,CAACG,IADQ,CAArB;AAGCI,MAAAA,OAAO,CAACC,GAAR,CAAYR,MAAM,CAACG,IAAnB;AAEFJ,MAAAA,KAAK,CAAChB,YAAN,CAAmBqC,GAAnB,CAAwBL,CAAD,IAAK;AAC3B,YAAGA,CAAC,CAACvB,WAAF,IAAiBO,KAAK,CAACJ,KAA1B,EAAgC;AAC/BI,UAAAA,KAAK,CAACJ,KAAN,GAAcoB,CAAC,CAACvB,WAAhB;AACA;;AACD,eAAO,IAAP;AACA,OALD;AAMA,YAAM6B,IAAI,GAAG,IAAIC,IAAJ,EAAb;AACA,YAAMC,KAAK,GAAGF,IAAI,CAACG,WAAL,EAAd;AACA,YAAMC,MAAM,GAAG,CAAEC,QAAQ,CAACL,IAAI,CAACM,QAAL,EAAD,CAAR,GAA0B,EAA3B,GAA+B,GAA/B,GAAmC,EAApC,IAA0CN,IAAI,CAACM,QAAL,EAAzD;AACA,YAAMC,IAAI,GAAG,CAAEF,QAAQ,CAACL,IAAI,CAACQ,OAAL,EAAD,CAAR,GAAyB,EAA1B,GAA8B,GAA9B,GAAkC,EAAnC,IAAuCR,IAAI,CAACQ,OAAL,EAApD;AACA9B,MAAAA,KAAK,CAACH,OAAN,GAAe2B,KAAK,GAAE,GAAP,GAAWE,MAAX,GAAkB,GAAlB,GAAsBG,IAArC;AACC,aAAOjB,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBb,KAAlB,EAAyBA,KAAK,CAAChB,YAA/B,CAAP;;AAEF,SAAKN,UAAL;AACCsB,MAAAA,KAAK,CAACd,GAAN,GAAYe,MAAM,CAACG,IAAnB;AACA,aAAOQ,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBb,KAAlB,EAAyBA,KAAK,CAACd,GAA/B,CAAP;;AAED,SAAKP,kBAAL;AACCqB,MAAAA,KAAK,CAACZ,OAAN,CAAca,MAAM,CAACG,IAAP,CAAY2B,IAA1B,IAAkC9B,MAAM,CAACG,IAAP,CAAY4B,KAA9C;AACA,aAAOpB,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBb,KAAlB,EAAyBA,KAAK,CAACZ,OAA/B,CAAP;;AAED,SAAKR,gBAAL;AACCoB,MAAAA,KAAK,CAACJ,KAAN,GAAcK,MAAM,CAACG,IAArB;AACA,aAAOQ,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBb,KAAlB,EAAyBA,KAAK,CAACJ,KAA/B,CAAP;;AAED,SAAKf,iBAAL;AACCmB,MAAAA,KAAK,CAACF,eAAN,GAAwB,EAAxB;AACAE,MAAAA,KAAK,CAACF,eAAN,GAAwBG,MAAM,CAACG,IAA/B;AACA,aAAOQ,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBb,KAAlB,EAAyBA,KAAK,CAACiC,eAA/B,CAAP;;AAED;AACC,aAAOjC,KAAP;AArFF;AAuFA,CAxFD;;AA0FA,eAAeD,gBAAf","sourcesContent":["import axios from 'axios';\nimport {ADD_CHAMBRES, DELETE_CHAMBRES, UPDATE_CHAMBRES, FETCH_CHAMBRES, UPDATE_ONE, ON_CHANGE_CHAMBRES, ON_CHANGE_SLIDER, NEW_DATA_CHAMBRES} from '../Actions/typesChambres';\nimport {urlHeader} from '../Actions/config';\n\nconst initState = {\n\tdataChambres: [\n\t\t// {\n\t\t//   \"nomChambre\": \"Coquelicot\",\n\t\t//   \"telChambre\": \"0349354341\",\n\t\t//   \"etageChambre\": \"1\",\n\t\t//   \"chauffeauChambre\": \"GAZ\",\n\t\t//   \"prixChambre\": 20000,\n\t\t//   \"numCategorie\": 1,\n\t\t//   \"numType\": 1,\n\t\t//   \"imageChambre\": \"\"\n\t\t// },\n\t\t// {\n\t\t//   \"nomChambre\": \"Jonquille\",\n\t\t//   \"telChambre\": \"0349354341\",\n\t\t//   \"etageChambre\": \"1\",\n\t\t//   \"chauffeauChambre\": \"GAZ\",\n\t\t//   \"prixChambre\": 20000,\n\t\t//   \"numCategorie\": 1,\n\t\t//   \"numType\": 1,\n\t\t//   \"imageChambre\": \"\"\n\t\t// }\n\t  ],\n\tmocksChambres: '',\n\tone: true,\n\tsubmitReusit: true,\n\tchanges : {\n\t\tnomChambre: \"\",\n\t\ttelChambre: \"\",\n\t\tetageChambre: \"\",\n\t\tchauffeauChambre: \"\",\n\t\tprixChambre: \"\",\n\t\tnumCategorie: \"\",\n\t\tnumType: \"\"\n\t},\n\tslide: 0,\n\tdateNow: '',\n\tnewDataChambres: []\n}\n\nconst ChambresReducers = (state = initState, action) => {\n\tswitch (action.type) {\n\t\tcase ADD_CHAMBRES:\n\n\t\t\taxios.post(urlHeader+\"Chambres/post\", action.data,{\n\t\t\t\t\theaders: {\n\t\t\t\t\t'Content-Type': 'application/x-www-form-urlencoded',\n\t\t\t\t\t'Access-Control-Allow-Methods': 'POST,GET,HEAD,OPTIONS,PUT,DELETE'\n\t\t\t\t\t}\n\t\t\t\t}).then(h => console.log(h)).catch(err => console.log(\"error parsing:\\n\", err));\n\t\t\tstate.dataChambres = [\n\t\t\t\t...state.dataChambres, ...action.data\n\t\t\t];\n\t\t\treturn Object.assign({}, state, state.dataChambres);\n\n\t\tcase DELETE_CHAMBRES:\n\t\t\tconst st = state.dataChambres.filter(e => {\n\t\t\t\treturn e.nomChambre !== action.id;\n\t\t\t});\n\t\t\tstate.dataChambres = [...st];\n\t\t\taxios.delete(urlHeader+\"Chambres/delete/\" + action.id,{\n\t\t\t\t\theaders: {\n\t\t\t\t\t'Content-Type': 'application/x-www-form-urlencoded',\n\t\t\t\t\t'Access-Control-Allow-Methods': 'POST,GET,HEAD,OPTIONS,PUT,DELETE'\n\t\t\t\t\t}\n\t\t\t\t}).then((e) => console.log(e)).catch(err => console.log(\"error parsing:\\n\", err));\n\t\t\treturn Object.assign({}, state, state.dataChambres);\n\n\t\tcase UPDATE_CHAMBRES:\n\t\t\tconst std1 = state.dataChambres.filter(e => {\n\t\t\t\treturn e.nomChambre !== action.data.nomChambre;\n\t\t\t});\n\t\t\tconst sto1 = action.data;\n\t\t\tstate.dataChambres = [\n\t\t\t\t...std1,\n\t\t\t\tsto1\n\t\t\t];\n\t\t\tconsole.log(sto1);\n\t\t\taxios.post(urlHeader+\"Chambres/put/\" + action.data.nomChambre, sto1,{\n\t\t\t\t\theaders: {\n\t\t\t\t\t'Content-Type': 'application/json;charset=UTF-8',\n\t\t\t\t\t'Access-Control-Allow-Methods': 'POST,GET,HEAD,OPTIONS,PUT,DELETE'\n\t\t\t\t\t}\n\t\t\t\t}).then((e) => console.log(e)).catch(err => console.log(\"error parsing:\\n\", err));\n\n\t\t\treturn Object.assign({}, state, state.dataChambres);\n\n\t\tcase FETCH_CHAMBRES:\n\t\t\tstate.dataChambres = [];\n\t\t\tstate.newDataChambres = [];\n\t\t  state.dataChambres = [\n\t\t     ...action.data\n\t\t   ];\n\t\t   console.log(action.data)\n\n\t\t\tstate.dataChambres.map((e)=>{\n\t\t\t\tif(e.prixChambre >= state.slide){\n\t\t\t\t\tstate.slide = e.prixChambre;\n\t\t\t\t}\n\t\t\t\treturn null;\n\t\t\t})\n\t\t\tconst date = new Date();\n\t\t\tconst years = date.getFullYear();\n\t\t\tconst mounth = ((parseInt(date.getMonth())<10)?'0':'') + date.getMonth();\n\t\t\tconst days = ((parseInt(date.getDate())<10)?'0':'')+date.getDate();\n\t\t\tstate.dateNow= years +\"-\"+mounth+\"-\"+days\n\t\t  return Object.assign({}, state, state.dataChambres);\n\n\t\tcase UPDATE_ONE:\n\t\t\tstate.one = action.data;\n\t\t\treturn Object.assign({}, state, state.one);\n\n\t\tcase ON_CHANGE_CHAMBRES:\n\t\t\tstate.changes[action.data.name] = action.data.value;\n\t\t\treturn Object.assign({}, state, state.changes);\n\n\t\tcase ON_CHANGE_SLIDER:\n\t\t\tstate.slide = action.data;\n\t\t\treturn Object.assign({}, state, state.slide);\n\n\t\tcase NEW_DATA_CHAMBRES:\n\t\t\tstate.newDataChambres = []\n\t\t\tstate.newDataChambres = action.data;\n\t\t\treturn Object.assign({}, state, state.newdataChambres);\n\n\t\tdefault:\n\t\t\treturn state;\n\t}\n}\n\nexport default ChambresReducers;\n"]},"metadata":{},"sourceType":"module"}